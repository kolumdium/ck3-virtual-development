namespace = vdev_building_event

vdev_building_event.1 = {
    type = character_event
    hidden = no
    theme = education
    desc = vdev_building_event.1.desc


    option = {
        name = vdev_add_building_event.1.a
        trigger = {
            scope:barony ?= {
                county = {
                    var:vdev_county_normal >= 25
                }
                title_province = {
                    free_building_slots > 0
                    NOT = {
                        has_building_or_higher = vdev_special_normal_01
                    }
                }
            }
        }
        scope:barony ?= {
            county = {
                vdev_remove_from_buff = {
                    BUFF = normal
                    AMOUNT = 25
                }
                vdev_refresh_county_buff = { BUFF = normal }
            }
            title_province = {
                add_building = vdev_special_normal_01
            }
        }
    }
    option = {
        name = vdev_add_building_event.1.b
        trigger = {
            scope:barony ?= {
                county = {
                    var:vdev_county_offensive >= 25
                }
                title_province = {
                    free_building_slots > 0
                    NOT = {
                        has_building_or_higher = vdev_special_offensive_01
                    }
                }
            }
        }
        scope:barony ?= {
            county = {
                vdev_remove_from_buff = {
                    BUFF = offensive
                    AMOUNT = 25
                }
                every_county_province = {
                    vdev_refresh_all_province_buffs = yes
                }
            }
            title_province = {
                add_building = vdev_special_offensive_01
            }
        }
    }
    option = {
        name = vdev_add_building_event.1.c
        trigger = {
            scope:barony ?= {
                county = {
                    var:vdev_county_defensive >= 25
                }
                title_province = {
                    free_building_slots > 0
                    NOT = {
                        has_building_or_higher = vdev_special_defensive_01
                    }
                }
            }
        }
        scope:barony ?= {
            county = {
                vdev_remove_from_buff = {
                    BUFF = defensive
                    AMOUNT = 25
                }
                vdev_refresh_county_buff = { BUFF = defensive }
            }
            title_province = {
                add_building = vdev_special_defensive_01
            }
        }
    }
    option = {
        name = vdev_add_building_event.1.d
        trigger = {
            scope:barony ?= {
                county = {
                    var:vdev_county_health >= 25
                }
                title_province = {
                    free_building_slots > 0
                    NOT = {
                        has_building_or_higher = vdev_special_health_01
                    }
                }
            }
        }
        scope:barony ?= {
            county = {
                vdev_remove_from_buff = {
                    BUFF = health
                    AMOUNT = 25
                }
                vdev_refresh_county_buff = { BUFF = health }
            }
            title_province = {
                add_building = vdev_special_health_01
            }
        }
    }
    option = {
        name = vdev_add_building_event.1.e
        trigger = {
            scope:barony ?= {
                county = {
                    var:vdev_county_infrastructure >= 25
                }
                title_province = {
                    free_building_slots > 0
                    NOT = {
                        has_building_or_higher = vdev_special_infrastructure_01
                    }
                }
            }
        }
        scope:barony ?= {
            county = {
                vdev_remove_from_buff = {
                    BUFF = infrastructure
                    AMOUNT = 25
                }
                vdev_refresh_county_buff = { BUFF = infrastructure }
            }
            title_province = {
                add_building = vdev_special_infrastructure_01
            }
        }
    }
    option = {
        name = vdev_add_building_event.1.f
        add_gold = vdev_building_gold_cost
    }
}

## add building slot event
vdev_building_event.2 = {
    type = character_event
    hidden = no
    theme = education
    desc = vdev_building_event.2.desc

    option = {
        name = vdev_add_building_slot_event.2.a
        trigger = {
            scope:barony ?= {
                county = {
                    var:vdev_county_normal >= vdev_building_slot_vdev_cost
                    var:vdev_extra_building_slots = 1
                }
            }
        }
        scope:barony = {
            county = {
                vdev_remove_from_buff = {
                    BUFF = normal
                    AMOUNT = vdev_building_slot_vdev_cost
                }
                vdev_refresh_county_buff = { BUFF = normal }
                vdev_extra_building_slot_bought = yes
            }
            title_province = {
                add_province_modifier = extra_building_slot
            }
        }
    }
    option = {
        name = vdev_add_building_slot_event.2.b
        trigger = {
            scope:barony ?= {
                county = {
                    var:vdev_county_normal >= vdev_building_slot_vdev_cost
                    var:vdev_extra_building_slots = 2
                }
            }
        }
        scope:barony = {
            county = {
                vdev_remove_from_buff = {
                    BUFF = normal
                    AMOUNT = vdev_building_slot_vdev_cost
                }
                vdev_refresh_county_buff = { BUFF = normal }
                vdev_extra_building_slot_bought = yes
            }
            title_province = {
                add_province_modifier = extra_building_slot
            }
        }
    }
    option = {
        name = vdev_add_building_slot_event.2.c
        trigger = {
            scope:barony ?= {
                county = {
                    var:vdev_county_normal >= vdev_building_slot_vdev_cost
                    var:vdev_extra_building_slots = 3
                }
            }
        }
        scope:barony = {
            county = {
                vdev_remove_from_buff = {
                    BUFF = normal
                    AMOUNT = vdev_building_slot_vdev_cost
                }
                vdev_refresh_county_buff = { BUFF = normal }
                vdev_extra_building_slot_bought = yes
            }
            title_province = {
                add_province_modifier = extra_building_slot
            }
        }
    }
    option = {
        name = vdev_add_building_slot_event.2.d
        trigger = {
            scope:barony ?= {
                county = {
                    var:vdev_county_normal >= vdev_building_slot_vdev_cost
                    var:vdev_extra_building_slots = 4
                }
            }
        }
        scope:barony = {
            county = {
                vdev_remove_from_buff = {
                    BUFF = normal
                    AMOUNT = vdev_building_slot_vdev_cost
                }
                vdev_refresh_county_buff = { BUFF = normal }
                vdev_extra_building_slot_bought = yes
            }
            title_province = {
                add_province_modifier = extra_building_slot
            }
        }
    }
    option = {
        name = vdev_add_building_slot_event.2.e
        trigger = {
            scope:barony ?= {
                county = {
                    var:vdev_county_normal >= vdev_building_slot_vdev_cost
                    var:vdev_extra_building_slots = 5
                }
            }
        }
        scope:barony = {
            county = {
                vdev_remove_from_buff = {
                    BUFF = normal
                    AMOUNT = vdev_building_slot_vdev_cost
                }
                vdev_refresh_county_buff = { BUFF = normal }
                vdev_extra_building_slot_bought = yes
            }
            title_province = {
                add_province_modifier = extra_building_slot
            }
        }
    }
    option = {
        name = vdev_add_building_slot_event.2.f
        add_gold = vdev_building_slot_gold_cost
    }
}